<!doctype html>

 

<head>
    <title> Video Game</title>
</head>

 

<body>
    <audio id="sound">
    <source src="sound.mp3">
    </audio>
    <audio id="sound3">
    <source src="sound3.mp3">
    </audio>
<!--    sound-->
    <canvas id="gameCanvas" width="900" height="720"></canvas>
    <script>
        
        var canvas, canvasContext;
        window.onload = function() {
        
            canvas = document.getElementById('gameCanvas');
            canvasContext = canvas.getContext('2d');

 

            document.addEventListener('keyup', keyReleased);
            document.addEventListener('keydown', keyPressed);

 

            setInterval(mainloop, 1000 / 50);
        }

 

        var playerXpos = 0;
        var playerYpos = 1;
        var playerXspeed = 3;
        var playerYspeed = 20;
        const PlAYER_HEIGHT = 120;
        const PlAYER_WIDTH = 110;
        var yVel = 1;

        
        var enemyXpos = 710;
        var enemyYpos = -15;
        var enemyXspeed = 5;
        const ENEMY_HEIGHT = 350;
        const ENEMY_WIDTH = 80;

        
        var playerjump = -7;
        
        
        const SPACE = 32;
        var spacePressed = false;

        var object = new Image();
        object.src = 'syringe.png';
        
        var virus = new Image();
        virus.src = 'covid.png';
        
        var BG = new Image() ;
        BG.src = 'Corona.png';
        
        var End = new Image() ;
        End.src = 'jacinda.png';
        var EndXpos = 0;
        var EndYpos = 0;
        
        
        var BGXspeed = 1;
        var BGXpos2 = 0;
        var BGXpos = 0;
        var BGYpos = 0;
        
        var thing = new Image();
        thing.src = 'syringe 2.png'
        
        var images = [object,thing];
        
        var settingUp = true;
        var gameRun = true;
        
        function mainloop() {
//            colorRect(0, 0, canvas.width, canvas.height, 'gray');
            if(gameRun){
                
                if(settingUp){
                    playerXpos = PlAYER_WIDTH * 2; 
                    settingUp = false;
                }
                drawImgs(BG, BGXpos, 0, canvas.width*2, canvas.height);
                drawImgs(BG, BGXpos2, 0, canvas.width*2, canvas.height);
                drawImgs(virus,playerXpos, playerYpos, PlAYER_WIDTH, PlAYER_HEIGHT);
                drawImgs(images[0],enemyXpos,enemyYpos,ENEMY_WIDTH,ENEMY_HEIGHT);
    //            drawImgs(thing,enemyXpos,enemyYpos,ENEMY_WIDTH,ENEMY_HEIGHT);
                playerMove();

                enemyMove();
                backgroundMove();
            }
            else {
                drawImgs(End, EndXpos, EndYpos, canvas.width, canvas.height);
            }
        } // end func

 

        function colorRect(x, y, w, h, c) {
            canvasContext.fillStyle = c;
            canvasContext.fillRect(x, y, w, h);
        } // end func

        function drawImgs(src,x,y,w,h){
            canvasContext.drawImage(src,x,y,w,h);
        }
        
        function backgroundMove(){
            if(BGXpos + canvas.width < 0){
                BGXpos = canvas.width;
            }
            if(BGXpos == 0){
               BGXpos2 = canvas.width * .772;
            }
            BGXpos -= BGXspeed;
            BGXpos2 -= BGXspeed;
            
        }
        
        function enemyMove(){
            
            enemyXpos -= enemyXspeed;
            
            if( enemyXpos < 0){
                enemyXpos = canvas.width
            }
            
            if(enemyYpos + ENEMY_HEIGHT > playerYpos && enemyYpos < playerYpos + PlAYER_HEIGHT && enemyXpos + ENEMY_WIDTH / 2  > playerXpos && enemyXpos < playerXpos + PlAYER_WIDTH * 0.8 ){
                
//                playerXpos = 0;
                   sound.play();
                    gameRun = false;
                sound3.play();
            }
            
            
        }

        var gravity = 0.5;
        
        
        function playerMove() {
            playerYpos += yVel;
            yVel += gravity;
            if (spacePressed)
                yVel = playerjump;
//                playerXpos = canvas.width / 6;      
            
            if(playerYpos + PlAYER_HEIGHT > canvas.height){
                yVel = playerjump;
            }
            if(playerYpos < (canvas.height) - canvas.height){
                yVel = gravity;
                
           }
        }   
          //end func
        function keyPressed(evt) {
            console.log(evt.keyCode)
            if (evt.keyCode == SPACE) {
                spacePressed = true;
                
                 (evt.keyCode == 83) 
                KeyPressed = true;
//               alert('hola')
            }
            
        }
           //end func
        function keyReleased(evt) {
            if (evt.keyCode == SPACE) {
                spacePressed = false;

 

                 (evt.keyCode == 83) 
                KeyPressed = false;
               
            }
        }
        
          
         
      //end func
    </script>

 

</body>